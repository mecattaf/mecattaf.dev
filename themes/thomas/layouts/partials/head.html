<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>{{ partial "title.txt" . }}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="canonical" href="{{ .Permalink }}">
		<link rel="icon" type="image/svg+xml" href="/favicon.svg">

		{{ with .Site.Params.Author.name }}<meta name="author" content="{{ . }}">{{ end }}

		{{ range .AlternativeOutputFormats -}}
			<link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .Permalink }}" title="{{ $.Site.Title }}" />
		{{ end -}}

    <link rel="stylesheet" href="{{ .Site.BaseURL }}node_modules/normalize.css/normalize.css">
    <link rel="stylesheet" href="{{ .Site.BaseURL }}node_modules/firacode/distr/fira_code.css">
		<link rel="stylesheet" href="{{ .Site.BaseURL }}css/nanum-gothic-coding.css">
		<link rel="stylesheet" href="{{ .Site.BaseURL }}css/style.css">
		
		<!-- Add Google Fonts for Japanese characters -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap">
		
		<!-- Theme Initialization Script - Must run before page renders to prevent FOUC -->
		<script>
			(function() {
				// This function determines what theme should be active right now
				function getEffectiveTheme() {
					// Check if user has manually set a preference
					const stored = localStorage.getItem('site-theme');
					if (stored === 'light' || stored === 'dark') {
						return stored;
					}
					// Default to dark mode as requested, regardless of system preference
					return 'dark';
				}
				
				// Apply the theme immediately to prevent visual flash
				document.documentElement.setAttribute('data-theme', getEffectiveTheme());
			})();
		</script>
		<script src="{{ .Site.BaseURL }}js/theme-toggle.js"></script>
	</head>
	<body>
